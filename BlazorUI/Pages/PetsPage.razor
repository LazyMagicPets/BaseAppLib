@namespace BlazorUI
@page "/PetsPage"
@attribute [Authorize]
@inherits LzComponentBaseAssignViewModel<PetsViewModel>
@inject ISessionViewModel SessionViewModel
@inject NavigationManager NavigationManager

<MudPaper>
    <MudContainer>

        <PetsList ViewModel="@ViewModel" 
            OnAddPet="AddPet"
            OnEditPet="EditPet"
            OnDeletePet="DeletePet"
            OnPetsReload="OnPetsReload"/>

    </MudContainer>
</MudPaper>

@code {

    protected override async Task OnInitializedAsync()
    {
        ViewModel = SessionViewModel.PetsViewModel;
        await ViewModel!.ReadAsync();
        await base.OnInitializedAsync();
    }

    private async Task OnPetsReload()
    {
        // Logic to handle pets reload, if needed
        await ViewModel!.ReadAsync();
    }   
    private async Task AddPet()
    {
        ;
    }

    private async Task EditPet(PetModel pet)
    {
        ViewModel!.CurrentViewModel = ViewModel.ViewModels[pet.Id];
        NavigationManager.NavigateTo("/PetPage"); 
        // Logic to edit the pet
       
    }
    private async Task DeletePet(PetModel pet)
    {
        // Logic to delete the pet
        ;
    }
}
